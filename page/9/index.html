<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="aZ679hf2Rw"><title> 我是思聪</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.april1985.com/atom.xml" title="我是思聪"><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129409069-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129409069-1');
</script>


<script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
  </script></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">我是思聪</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>现在</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>曾经</p></a><ul class="shortcut-icons"><a href="https://github.com/derekhe" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="body-container"><div id="post-list" class="left"><div class="home post-list"><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2014-10-23-sydney-city-impression/" class="post-title-link">悉尼——都市初印象</a></h2><div class="post-info">Oct 23, 2014</div><div class="post-content"><p>我住的公寓在靠近中国城的Hyde Park旁边，生活很方便。走路两三分钟可以到World Square Shopping Centre，底下有coles超市，还有一家华人的超市可以购买到很多的中国食品。去Darling Harbour也10分钟路程，</p>
<p>第一天到，早上睡了一大觉把时差倒回来了，中午和新认识的7楼的女孩一起在World Square出去吃饭，一顿简单的中式快餐面，15澳元，折合人民币80多块钱了。说到这里广大男人就只有羡慕的份了，刚到我就能认识一个新的异性朋友。至于如何认识的，给大家一个想象空间吧。</p>
<p>下午出去逛了一圈，顺便熟悉了一下环境。第一天由于没有拿到4G卡，不敢到处乱走，就在公寓下好了Google离线地图，然后出去瞎逛。悉尼CBD虽然属于比较现代感的地方，但到处还是可以看到很多古老的建筑，</p>
<p>街景<br><a href="/images/2014/10/20140831-20140831_172421.jpg"><img src="/images/2014/10/20140831-20140831_172421.jpg" alt="20140831-20140831_172421"></a></p>
<p>纪念碑<br><a href="/images/2014/10/20140831-20140831_172427.jpg"><img src="/images/2014/10/20140831-20140831_172427.jpg" alt="20140831-20140831_172427"></a></p>
<p>购物街<br><a href="/images/2014/10/20140831-20140831_173537.jpg"><img src="/images/2014/10/20140831-20140831_173537.jpg" alt="20140831-20140831_173537"></a></p>
<p><a href="/images/2014/10/20140901-20140901_184623.jpg"><img src="/images/2014/10/20140901-20140901_184623.jpg" alt="20140901-20140901_184623"></a></p>
<p><a href="/images/2014/10/20140901-20140901_184658.jpg"><img src="/images/2014/10/20140901-20140901_184658.jpg" alt="20140901-20140901_184658"></a></p>
<p>可能是由于空气质量很好，到处干干净净，但街道上也能看到一些纸屑烟头啥的。天非常地蓝，阳光刺眼。庆幸的是我运气比较好，在我来之前的两周，悉尼一直在下雨，搞得同事James都没法出去。气温也很冷，我一到，就把成都的夏天带到了悉尼，只是没有了成都的可怕的雾霾。</p>
<p>悉尼CBD区域街道不大，双向四车道，但没有国内的那么宽，机动车和非机动车都混行。汽车开得很快，甚至一看到绿灯轰的一下就出去了。红绿灯井然有序。过街的红路灯灯杆上还有一个按钮，过街的时候需要按一下，特别是在晚上，否则即便车停下来等红灯，但人行道的灯不会变绿。</p>
<p>图为网上找的，就这个样。<br><a href="/images/2014/10/549300-53310f00-29a8-11e4-8aa3-c8bd07392c82.jpg"><img src="/images/2014/10/549300-53310f00-29a8-11e4-8aa3-c8bd07392c82.jpg" alt="549300-53310f00-29a8-11e4-8aa3-c8bd07392c82"></a></p>
<p>这个按钮还会发出“呱呱呱呱”的声音，当绿灯一亮的时候，就会发出“噌”的一声，然后人就冲出去了。别说我夸张，早上上班的时候，有些路口红绿灯时间很短，很多人还真是“冲”出去的。等“噌”以后，这个玩意儿就变成了，“啪啪啪啪啪”的声音，很好玩。</p>
<p>骑车在这里我想有点折腾。我之前本想过来租个自行车的，网上查了一下价格在50澳元左右，太贵了，国内都可以买个车了。在这里骑车还需要装配齐全——头盔、电筒、闪光灯啥的必须齐备，并且在在机动车道上骑车不能闹着玩，得跑得很快才行，否则后面的车骂死你。</p>
<p>还有一点，这里的街道上上下下的，有时候有比较陡的坡道，在客户公司居然Lobby到7楼，就一层楼。汽车都要费很大的劲才能上去，骑车的自然就很折腾了。</p>
<p>悉尼的商业街集中在Westfield。那里有Sydney Tower可以看到悉尼全景，但要收费的所以我没上去过。</p>
<p>Sydney Tower<br><a href="/images/2014/10/20140902-20140902_174758.jpg"><img src="/images/2014/10/20140902-20140902_174758.jpg" alt="20140902-20140902_174758"></a></p>
<p>步行街不大，两分钟走完，比起成都的春熙路那简直是是不能比啊。</p>
<p><a href="/images/2014/10/20140902-20140902_174611.jpg"><img src="/images/2014/10/20140902-20140902_174611.jpg" alt="20140902-20140902_174611"></a></p>
<p><a href="/images/2014/10/20140902-20140902_174726.jpg"><img src="/images/2014/10/20140902-20140902_174726.jpg" alt="20140902-20140902_174726"></a></p>
<p>晚上出去逛了一趟超市，James教我怎么用超市的自助结账机。超市下班的时候比较热闹，人比较多，排队等结账的现象还是有的。人工服务不用自己操心，速度也比较快，但如果仅仅买了一两样东西的，还是自助结账机比较迅速，扫扫条码分分钟搞定。</p>
<p><a href="/images/2014/10/20140901-20140901_182706.jpg"><img src="/images/2014/10/20140901-20140901_182706.jpg" alt="20140901-20140901_182706"></a></p>
<p>当买了水果之内的需要称重的东西，那就没办法扫描了。在台子中间有一个板，其实是一个称，放上水果之后屏幕上会显示重量，然后选择对应的水果就好了。当然这里的选项比较多，好多时候不知道水果叫什么名字，就只有寻求help了。</p>
<p>等所有的东西都放到塑料袋中，然后就塞钱走人，也没人查你。</p>
<p>注意，第一天我用的招行的信用卡刷卡的。刷卡当然一次性搞定，也不用输入密码，但后来我查账的时候才发现，居然收我的6.1的汇率，当时的汇率其实才5.7。后来才知道，原来在不支持银联的机器上刷卡，会另外收取什么费用。还好我就刷过一两次，损失不大。</p>
<p>成都银行的金卡(其实很惭愧上面就几千块钱)在异地刷卡取现是免手续费的，非常给力。就在我楼下的nab银行ATM取现，确实不收手续费，非常方便实惠。所以后续我在悉尼一直用的是现金了，从不刷卡了。</p>
<p>但有些银行可能会提示收费，例如汇丰银行，有一次取现20澳元，居然提示说要收2澳元手续费。另外得鄙视一下汇丰的反人类的ATM机，居然卡只能插入一半多一些，然后就插不进去了。正确的流程是插进去一半，等一下，然后再取出来，然后再交易，幸好和做会计的小妹一起出去的，否则我还真搞不懂。</p>
<p>除了纸币，确切的说应该是塑料的钱，这里用硬币的机会很多。令人头痛的是最大最重的硬币居然是50分的，然后2澳元的居然比1澳元的还小。感兴趣的可以看看<a href="http://baike.baidu.com/view/272494.htm" target="_blank" rel="noopener">这里</a>。有时候满满一钱包都是硬币，很不方便。</p>
<p>晚上回家，跑楼下的健身房游了个泳，免费的，但比较小，水质只能说将就。第二天，舒舒服服的去上班了。</p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2014-10-13-sydney-first-time/" class="post-title-link">悉尼——出发</a></h2><div class="post-info">Oct 13, 2014</div><div class="post-content"><p>年中一直谈论出国的事情，但由于在节骨眼上临时抽调去支持一个项目，所以给搞黄了。运气比较好的是，第二个项目也才刚开始，8月份需要出差过去参加Initialize Workshop。公司7月份就开始申请的VISA的事情拖到8月底才尘埃落定，虽然已经错过了Initialize Workshop，但还好处在项目的初期过去，也能起到很大的作用。</p>
<p>机票定在8月30号，在广州中转。我把老婆儿子的机票也买了，一起回婆婆家。儿子推着自己的箱子，兴奋地不得了。这次坐的是787梦想飞机。新的大飞机果然不错，每个座位都有多媒体，给丁仔放熊出没看他就安静了，只是仰着个头不是太舒服，还不如用iPad放。</p>
<p><a href="/images/2014/10/20140830-20140830_131203.jpg"><img src="/images/2014/10/20140830-20140830_131203.jpg" alt="20140830-20140830_131203"></a></p>
<p><a href="/images/2014/10/20140830-20140830_155643.jpg"><img src="/images/2014/10/20140830-20140830_155643.jpg" alt="20140830-20140830_155643"></a></p>
<p><a href="/images/2014/10/20140830-20140830_185239.jpg"><img src="/images/2014/10/20140830-20140830_185239.jpg" alt="20140830-20140830_185239"></a></p>
<p>两个小时的行程到达广州。我们一家人在中转口分开，妈妈和丁仔拿行李，爸爸走二楼中转。由于我两个航班都是南航的，所以可以在成都申请直接到悉尼提取，这样方便快捷省得去排队了。</p>
<p><a href="/images/2014/10/20140830-20140830_191117.jpg"><img src="/images/2014/10/20140830-20140830_191117.jpg" alt="20140830-20140830_191117"></a></p>
<p>但这次行李等了太久，大概等了有40分钟的样子，似乎故意不怎么想让我们分开。我在楼上没走，陪着他们直到拿到行李。拿到行李后，丁仔和爸爸很高兴的说再见，一点都不留恋，和妈妈一起出去坐车了。</p>
<p><a href="/images/2014/10/20140830-20140830_194248.jpg"><img src="/images/2014/10/20140830-20140830_194248.jpg" alt="20140830-20140830_194248"></a></p>
<p>之前我以为不用过安检了，所以预留的时间不多。结果发现坐了车到了国际中转还是要安检。结果在安检的时候，出人意料的事情发生了。还在安检站呢，等小妹扫描完没问题去拿东西的时候，我发现护照、手机、钱包不见了！这什么世道！我立刻问安检的工作人员，她说是前面那个人拿走了，然后那人把钱包、护照退给我了，说是拿错了。我清理好包包，装好电脑再检查，手机呢？安检人员说还是在他那里，靠，那人还在和他的同伴说着啥，我说我的手机你拿了哇？他慌张的从裤包里面拿出来，给我说拿错了，说是半天没打通。我黑了他一眼，彻底怀疑你这是不是在偷东西！所以以后安检的时候，要特别的小心自己的东西，别被人偷了。</p>
<p>过了安检过边检，盖着章表示可以出国了。整个过程还是比较快的。对于晚到的旅客还有一个特殊通道可以用，不用排队，还算人性化。</p>
<p><a href="/images/2014/10/20140830-20140830_202049.jpg"><img src="/images/2014/10/20140830-20140830_202049.jpg" alt="20140830-20140830_202049"></a></p>
<p>半小时后，上飞机了。空客A320，当初我还担心飞机上没有玩的，下载了好几部电影。结果每个座位上都有多媒体的播放器，我下的电影都有，算是白下了。</p>
<p><a href="/images/2014/10/20140830-20140830_202447.jpg"><img src="/images/2014/10/20140830-20140830_202447.jpg" alt="20140830-20140830_202447"></a></p>
<p><a href="/images/2014/10/20140830-20140830_202456.jpg"><img src="/images/2014/10/20140830-20140830_202456.jpg" alt="20140830-20140830_202456"></a></p>
<p>飞机晚上9点起飞，到悉尼是早上8点，总共9个小时的飞行。坐上飞机的时候已经有点累了，看了一部极品飞车，11点过准备睡会儿了。这时候才觉得长途飞机上睡觉有多么的折腾。</p>
<p>我旁边的那哥们儿，一上飞机就睡了两三个小时，这下等我要睡觉了，好了，他开始看电影了，而且一看就看到第二天天亮，精神也太好了吧。他看电影倒好，昏暗的机舱里，他的显示屏一晃一晃的，弄得我很难睡着。怎么办呢？上机的时候拿了一份报纸这时候管用了，拿了两三张一头压在后脑勺，一头盖在脸上，好了很多。</p>
<p>飞机的噪音是第二个问题，把入耳式耳塞塞到耳朵里面，解决。</p>
<p>第三个问题是空调，实在是太冷了。头上吹下来的冷气搞得头顶发凉，而且还没有调节的地方。身上裹了毛毯还算稍微暖和，但脚下穿的冬天的皮的运动鞋都不管用，像是泡在冰水里面一样。最终我只解决了头顶空调的问题，只需要把报纸搭在头上就好了。</p>
<p>就这样折腾折腾一晚上，坐着的姿势搞得腰酸背痛，根本无法睡着。就这样半清醒的状态直到第二天早上6点(悉尼时间)，其实只睡了4个小时，然后空姐开灯发早餐了。外面阳光明媚啊，赶紧调了手表，纪念我失去的两个小时。吃了早饭后，这下睡不着了，到处的舷窗都打开了，阳光格外刺眼。虽然很困，坚持着看会儿电影，终于到了悉尼。</p>
<p>悉尼机场还有很多中文标示，一般来讲走不错。</p>
<p><a href="/images/2014/10/20140831-20140831_084413.jpg"><img src="/images/2014/10/20140831-20140831_084413.jpg" alt="20140831-20140831_084413"></a></p>
<p><a href="/images/2014/10/20140831-20140831_084652.jpg"><img src="/images/2014/10/20140831-20140831_084652.jpg" alt="20140831-20140831_084652"></a></p>
<p><a href="/images/2014/10/20140831-20140831_084743.jpg"><img src="/images/2014/10/20140831-20140831_084743.jpg" alt="20140831-20140831_084743"></a></p>
<p>出了机场，麻烦的事情又来了，司机呢？之前邮件里面说好的提前一点在机场等我的，怎么一个影子都没有呢？打个电话问问吧。</p>
<p>我以为我很聪明，当初在国内的时候，给skype冲了1欧元，想着过去可以用网络电话。连上机场的Free Sydney，结果弄死打不开网页，Skype也连不上，有这么差劲么？</p>
<p>折腾了10分钟，不想搞了。在出机场的门口，有一个Help Desk，有一个新加坡籍的老人家帮我打了电话。结果是司机说没有收到通知，不知道要过来，立马安排过来接。这样就在机场孤孤零零的等了半个多小时，终于来了。</p>
<p><a href="/images/2014/10/20140831-20140831_094754.jpg"><img src="/images/2014/10/20140831-20140831_094754.jpg" alt="20140831-20140831_094754"></a></p>
<p><a href="/images/2014/10/20140831-20140831_095303.jpg"><img src="/images/2014/10/20140831-20140831_095303.jpg" alt="20140831-20140831_095303"></a></p>
<p>半个小时后 ，到达公寓。公寓在Hyde公园旁边，离中国城很近，附近也有很多韩日的餐馆，很方便。我住在12楼，公司的租的房间还很大，两居室的，生活用具齐全，非常不错。我以为接下来的几周可能会share房间，后来证明是想多了。略微收拾一下，赶紧躺床上睡一觉，累死了。</p>
<p><a href="/images/2014/10/20140831-20140831_101805.jpg"><img src="/images/2014/10/20140831-20140831_101805.jpg" alt="20140831-20140831_101805"></a></p>
<p><a href="/images/2014/10/20140831-20140831_101817.jpg"><img src="/images/2014/10/20140831-20140831_101817.jpg" alt="20140831-20140831_101817"></a></p>
<p><a href="/images/2014/10/20140831-20140831_101827.jpg"><img src="/images/2014/10/20140831-20140831_101827.jpg" alt="20140831-20140831_101827"></a></p>
<p><a href="/images/2014/10/20140831-20140831_101831.jpg"><img src="/images/2014/10/20140831-20140831_101831.jpg" alt="20140831-20140831_101831"></a></p>
<p><a href="/images/2014/10/20140831-20140831_101812.jpg"><img src="/images/2014/10/20140831-20140831_101812.jpg" alt="20140831-20140831_101812"></a></p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2014-10-09-ways-to-improve-offshore-and-onshore-communication/" class="post-title-link">Ways to improve offshore and onshore communication</a></h2><div class="post-info">Oct 9, 2014</div><div class="post-content"><p>I’m working in a China/Australia delivery team for 2 years. The top challenge for offshore/onshore delivery team is the communication. Language, culture, timezone, location are the main barriers between these two countries. As a team, we are continually improving the communication skills and quality. Today I will share these stories.</p>
<h3 id="English-warm-up"><a href="#English-warm-up" class="headerlink" title="English warm up"></a>English warm up</h3><p>I have never worked in a foreign company before joining ThoughtWorks 2 years ago. The first week was a nightmare to me. I didn’t understand what teammates were talking about in the stand up. I couldn’t follow the meeting and got completely lost very quickly. I was sad and I knew that I need a change.</p>
<p>One effective way I tried was that every morning when I was driving my car to company, I listened to the English materials. Although I may lost the content, it built an English environment and help me to warm up. You may say that it is because you get familiar with the stand up. Yes, I agree. This is one reason, but my way plays an important role. I tried not listen to the materials sometimes and I found I could hardly know the conversation at the beginning.</p>
<h3 id="Ask-questions"><a href="#Ask-questions" class="headerlink" title="Ask questions"></a>Ask questions</h3><p>I notice that China team is a bit shy to ask questions while Australia team ask a lot. It is quite an interesting thing. I believe culture difference is one of the reasons.</p>
<p>In Chinese culture, it is shame if you don’t know. Chinese people keep silence to protect themselves when they don’t know. They may struggle to think if it is a stupid question to ask. Also, they say “no questions” or “I’m fine” even when they totally get lost. Finally, they do not usually ask experienced people or managers challenging questions.</p>
<p>In my opinion, to break these culture obstacle, both of the sides need to know the culture differences and make sure they are safe to ask any questions. When people feel it is not safe to ask, you should try to talk to individuals offline on your initiative. Sometimes online chat is better than face-to-face talk, which makes both side feel comfortable.</p>
<h3 id="Debriefing-is-invaluable"><a href="#Debriefing-is-invaluable" class="headerlink" title="Debriefing is invaluable"></a>Debriefing is invaluable</h3><p>Debriefing after a meeting or a task will greatly improve the understanding. Even you are quite sure you know, I believe that it is better to exchange your understanding with the whole team. This helps other guys to check their understanding and it is good for you to know that people are on the same page. It is even more helpful when team members are using English as second language.</p>
<h3 id="Use-video-and-whiteboard-as-much-as-you-can"><a href="#Use-video-and-whiteboard-as-much-as-you-can" class="headerlink" title="Use video and whiteboard as much as you can"></a>Use video and whiteboard as much as you can</h3><p>Obviously, video is better than audio, we can see each other’s body language and their mouth.</p>
<p>On the other hand, the whiteboard is another powerful tool. If you do not have one, notepad is another choice. It is quite quite hard to know each other accurately when both side are non-English speaking. We tried to type some words into the whiteboard/notepad and draw some pictures. By doing this, we can read from the screen multiple times and we can explain our thinking with picture which is easier than talking.</p>
<h3 id="Core-working-hours"><a href="#Core-working-hours" class="headerlink" title="Core working hours"></a>Core working hours</h3><p>Time difference is usually a blocker to move things go quickly. China starts to work at 9AM while Australia starts at 11AM (or 12AM after daylight saving). So the overlap time is about 4 hours per day. If China team can come 1 hour ahead, we can win another 1 hour overlap.</p>
<h3 id="Be-prepared-for-meeting-don’t-be-late"><a href="#Be-prepared-for-meeting-don’t-be-late" class="headerlink" title="Be prepared for meeting, don’t be late"></a>Be prepared for meeting, don’t be late</h3><p>Since overlap time is short, the a more effective meeting is quite important. Facilitators should prepare the meeting at least 5 minutes ahead, including the video, audio, screen sharing, whiteboard and powerpoint. Participators should join the  meeting on time and be prepared for discussion.</p>
<p>Here are some tips for facilitating a successful meeting:* Send meeting presentation or materials and let people to have a look at first. This gives context for participating.</p>
<ul>
<li>Collect ideas from individuals before discussion. It helps you organise and control the discussion.</li>
<li>Keep the meeting short. The suggestion is that 30 minutes for knowledge sharing and 45 minutes for discussion. Do not have a meeting longer than 1 hour. People cannot concentrate for a long time. Short meeting helps facilitator focus on the topic and it is also easier to book. People are happy to join short meetings.</li>
<li>Keep asking questions to make sure everyone understand.</li>
<li>Prepare a clock to control the time. You can download some tiny top-most clock to use.</li>
</ul>
<h3 id="Rotation"><a href="#Rotation" class="headerlink" title="Rotation"></a>Rotation</h3><p>Furthermore, it is great if rotation is possible. Keeping one more persons in Australia is valuable. He or she can act as a bridge between the two countries.</p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2014-09-16-continuous-integration-process-optimization/" class="post-title-link">持续集成流程优化</a></h2><div class="post-info">Sep 16, 2014</div><div class="post-content"><p>持续集成有时候成了一种固定的模式后，就难以摆脱定式思维，其实我们还有很多可优化的空间。</p>
<h3 id="习以为常的CI流程"><a href="#习以为常的CI流程" class="headerlink" title="习以为常的CI流程"></a>习以为常的CI流程</h3><p>我们通常习惯的CI模式基本上如下图所示，运行于Jenkins，开发基于Maven Spring AngularJS等。</p>
<p><img src="/images/2014/09/Untitled-Diagram-1.png" alt>](/images/2014/09/Untitled-Diagram-1.png)</p>
<p>各个步骤的用途如下：</p>
<ul>
<li>BUILD &amp; UNIT TEST：构建和单元测试，生成后续步骤所需要的artifacts。</li>
<li>INTEGRATION TEST：集成测试外部依赖。</li>
<li>END TO END TEST：有时候称之为Functional Test，测试整个系统的功能，通常运行于Windows+Jetty环境运行。成功后进行部署。</li>
<li>DEV ENV：开发人员的测试环境，运行于Linux+Tomcat环境。</li>
<li>SYS ENV：测试人员的环境，运行于Linux+Tomcat环境。</li>
<li>UAT ENV：通常是business的人进行用户验收测试，运行于Linux+Tomcat环境。</li>
</ul>
<p>这样的步骤确保了在END TO END TEST之后的代码都是已经测试过，品质量好的代码。但我们还是发现了其中存在的若干问题。</p>
<h3 id="问题一：DEV环境通常闲置"><a href="#问题一：DEV环境通常闲置" class="headerlink" title="问题一：DEV环境通常闲置"></a>问题一：DEV环境通常闲置</h3><p>在我经历的两个项目中，开发人员一般都在本地进行调试好了以后，不会在DEV环境再进行调试。DEV环境的唯一用途恐怕就是测试部署是否正常。所以一般情况下都闲置，利用率较低。</p>
<h3 id="问题二：END-TO-END测试的环境和真实产品环境不匹配"><a href="#问题二：END-TO-END测试的环境和真实产品环境不匹配" class="headerlink" title="问题二：END TO END测试的环境和真实产品环境不匹配"></a>问题二：END TO END测试的环境和真实产品环境不匹配</h3><p>在目前我们的END TO END TEST阶段，主要是用本地的Jetty来运行测试，整个测试过程都是在CI的Windows服务器上进行，和真实环境中的Linux+Tomcat环境还是有差异。由于环境的差异，虽然测试可能通过，但还是可能遗留一些和环境相关的问题。</p>
<h3 id="问题三：END-TO-END测试出错后，不容易找到问题来源"><a href="#问题三：END-TO-END测试出错后，不容易找到问题来源" class="headerlink" title="问题三：END TO END测试出错后，不容易找到问题来源"></a>问题三：END TO END测试出错后，不容易找到问题来源</h3><p>由于END TO END通常都是比较脆弱的环境，第三方的依赖的不稳定和测试工具的不稳定都很容易使之失败。失败后，开发人员通常会查看Jenkins上的日志，然后分析原因。然而这些原因非常难找，例如Protractor的Stack就基本上没太大用户，assert失败后就只能靠猜测。对于很多概率性的问题或者本地环境没有的问题，需要反复的checkin代码进行尝试，更难进行调试。</p>
<p>另外END TO END处于比较后期，一旦发现问题需要修改某些代码然后在进行测试，将会变得异常的漫长。</p>
<h3 id="解决方案：重新布置CI流程"><a href="#解决方案：重新布置CI流程" class="headerlink" title="解决方案：重新布置CI流程"></a>解决方案：重新布置CI流程</h3><p>我们仅仅需要做一点点小的修改，将DEV环境移到END TO END之前，就能解决上述的问题</p>
<p><a href="/images/2014/09/Untitled-Diagram-2.png"><img src="/images/2014/09/Untitled-Diagram-2.png" alt="改进的CI流程"></a></p>
<p>和之前的CI流程相比，DEV会在集成测试之后，直接进行部署。END TO END的测试脚本将会指向于DEV环境进行测试而不是之前的本地Jetty环境。</p>
<h3 id="解决的问题"><a href="#解决的问题" class="headerlink" title="解决的问题"></a>解决的问题</h3><ul>
<li>问题一：DEV环境通常闲置。</li>
</ul>
<blockquote>
<p>DEV环境将作为END TO END环境的测试对象，利用率更高。</p>
</blockquote>
<ul>
<li>问题二：END TO END测试的环境和真实产品环境不匹配</li>
</ul>
<blockquote>
<p>DEV环境运行于和的Production一样的环境，END TO END测试更为真实可靠。</p>
</blockquote>
<ul>
<li>问题三：END TO END测试出错后，不容易找到问题来源</li>
</ul>
<blockquote>
<p>DEV环境可以直接访问，并且已经部署，出错后，可在本地将END TO END测试指向DEV环境，进行测试。如果是测试代码问题，修改后马上可以重新测试；如果是产品代码的问题，修改提交后只需要重新单元测试及集成测试即可，速度比之前会更快。</p>
</blockquote>
<h3 id="带来的问题"><a href="#带来的问题" class="headerlink" title="带来的问题"></a>带来的问题</h3><p>这样做当然也带来一个问题：对比之前，此时的DEV环境将不是可靠的一个环境。但DEV环境本来不是给开发人员玩的环境么？所以我个人认为这不是一个问题，我将其命名为TEST DEV ENV以便和之前的DEV ENV进行区分。</p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2014-09-15-wordpress-docker/" class="post-title-link">Wordpress on docker</a></h2><div class="post-info">Sep 15, 2014</div><div class="post-content"><p>I was thinking for a long time to move my blog back to Wordpress. I tried ghost blog but found it was at beginning stage and not mature to use, although the markdown feature seems very attractive. Now Wordpress can write blog using markdown too.</p>
<p>It took me a day to move it back. One reason is I couldn’t import markdown to Wordpress easily. It was lucky that I had a full backup of the database at Feb, 2014. Another reason is that I’d like to try some new technology, yes, docker.</p>
<p>I have being using linux server for several years as playground. One major problem I faced before was after a long time running, the server was installed a lot of softwares that were not needed. “apt-get remove” could not remove all the files totally. I tried vagrant but it is at machine level and too heavy. Then I found docker. It is a tool to address this problem. Docker images could be removed or installed easily. You can even have a base image then install and remove any software without damage host.</p>
<p>Installation of docker is supported by most major linux operation, you can find them at docker’s main site.<br>To install a wordpress on docker, it is quite easy.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir -p /docker/data/wordpress/db</span><br><span class="line">mkdir -p /docker/data/wordpress/site</span><br><span class="line">docker run --name wordpress-mysql -e MYSQL_ROOT_PASSWORD=mypassword -v /docker/data/wordpress/db:/var/lib/mysql -d mysql</span><br><span class="line">docker run --name wordpress --link wordpress-mysql:mysql -p 80:80 -v /docker/data/wordpress/site:/var/www/html -d wordpress</span><br></pre></td></tr></table></figure>

<p>After several minutes, it is done. You can visit localhost to setup the site.</p>
<p>NOTICE: you must mount the volume to your host’s directory to keep data, otherwise all the data will lost after you delete container.</p>
<p>Enjoy.</p>
</div></article></div></div></div><div id="sidebar" class="left"><div id="about-panel"><div class="info"><div class="title">贺思聪</div><div class="bio">《爬虫实战：从数据到产品》作者，国内首个机票价格历史及预测小程序“爱飞狗旅行”作者，极客、架构师、大数据玩家。</div></div><img src="/images/avatar.png" class="avatar"></div><div id="friend-links-panel"><div class="panel-title"><p>LINKS</p></div><a href="http://github.com/derekhe" target="_blank" class="link-item"><div class="link-container"><div class="site-name">GitHub</div><div class="site-desc">http://github.com/derekhe</div></div></a><a href="http://www.jianshu.com/u/b1e713e56ea6" target="_blank" class="link-item"><div class="link-container"><div class="site-name">简书</div><div class="site-desc">http://www.jianshu.com/u/b1e713e56ea6</div></div></a><a href="https://www.linkedin.com/in/sicong-he-56a95437/" target="_blank" class="link-item"><div class="link-container"><div class="site-name">LinkedIn</div><div class="site-desc">https://www.linkedin.com/in/sicong-he-56a95437/</div></div></a></div></div></div><div class="clear"></div></main><footer class="footer-container"><div class="paginator"><a href="/page/8/" class="prev">PREV</a><a href="/page/10/" class="next">NEXT</a></div><div class="copyright"><p>© 2008 - 2019 <a href="http://www.april1985.com">贺思聪</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer><script>var _mtac = {}; (function() {     var mta = document.createElement("script"); mta.src = "http://pingjs.qq.com/h5/stats.js?v2.0.2";    mta.setAttribute("name", "MTAH5");    mta.setAttribute("sid", "500490740");    var s = document.getElementsByTagName("script")[0];    s.parentNode.insertBefore(mta, s);})();</script></body></html>