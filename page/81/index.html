<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="aZ679hf2Rw"><title> 我是思聪</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.april1985.com/atom.xml" title="我是思聪"><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129409069-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129409069-1');
</script>


<script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
  </script></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">我是思聪</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>现在</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>曾经</p></a><ul class="shortcut-icons"><a href="https://github.com/derekhe" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="body-container"><div id="post-list" class="left"><div class="home post-list"><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2007-11-09-mobile-bug/" class="post-title-link">手机窃听器</a></h2><div class="post-info">Nov 9, 2007</div><div class="post-content"><p>上网不乏各种各样的狗屁广告，但有一些还是真的。今天就根据广告查了查手机窃听器的原理这些，了解一下背后的技术，免得以后遭了还不知道怎么回事。在一个论坛上面找到一个帖子弄得不错，写得挺详细的，可以看看：<br><a href="http://club.ccmove.com/nclub/topicdisplay-1058-23754-1.html" target="_blank" rel="noopener">http://club.ccmove.com/nclub/topicdisplay-1058-23754-1.html</a></p>
<h1 id="顺便我也把这文章整理放下面："><a href="#顺便我也把这文章整理放下面：" class="headerlink" title="顺便我也把这文章整理放下面："></a>顺便我也把这文章整理放下面：</h1><p>手机窃听器悄然现身武汉 买主多是阔太太</p>
<p>【2004-10-20 21:34】 【记者 刘尧】 【武汉晨报】</p>
<p>　　丈夫整天在外忙生意，晚上应酬又多，会不会“越轨”？一些富商太太的心病竟衍生出商机。记者近日从一家手机经销商处了解到，手机窃听器在武汉面市。<br>　　18日，记者在熟人带领下，以顾客身份见到了黄石路一家通讯器材店的老板林先生。</p>
<p>　　熟人介绍他才卖</p>
<p>　　听说记者想买手机窃听器，林老板一脸的不相信。</p>
<p>　　“看你这样，不像用这玩意儿的人。”</p>
<p>　　“我一个朋友想买这个，她脸皮薄，自己不好意思来。”</p>
<p>　　“你是干吗的？”“我在一家公司打工。”……</p>
<p>　　“考验”5分钟后，林老板说：“不好意思啊，这东西都要有熟人介绍我才卖。”</p>
<p>　　买主多是阔太太</p>
<p>　　见林老板放松了警惕，记者问道：“买这个都是些什么人？”</p>
<p>　　“买这个的多数是阔太太，用它来监视老公。她们不在乎钱，有位顾客月初买了一款5000多的，月底出了8000多的新款，她立刻又买了一个。”</p>
<p>　　“这个顾客是干什么的？”</p>
<p>　　“我们从来不问。这是行规。”</p>
<p>　　据林老板介绍，顾客购买手机窃听器后，可随时享受经销商提供的技术支持，1个月包换，1年内免费包修。“我的售后服务绝对一流，不比任何品牌手机差。”</p>
<p>　　林老板不愿透露窃听器的销量和利润。他表示现在进货渠道不太顺畅，每月至少有一周时间无货可卖。</p>
<p>　　高档货要预定</p>
<p>　　记者要看货，林老板坚持要“先付50%的钱才行”。记者软磨硬泡，他才拿出一块外形与手机芯片相似、表面积约1平方厘米左右的芯片。</p>
<p>　　“我先试一下。”“不买不能试，”林老板说。</p>
<p>　　他向记者介绍了使用方法：先将芯片植入手机主板，手机菜单中就会多出一个功能选项，选定后输入密码，再输入要窃听的手机号码，就可以接收到该手机的通话内容，窃听的有效距离由芯片质量的优劣决定。</p>
<p>　　“这款产品只要1200元，是最差的，有效范围1公里。高档货的范围能达到几百公里，卖1万多元，但要提前半个月预定。”</p>
<p>　　“太贵了，我得回去和她商量一下。”记者借故离开。</p>
<h1 id="据知情人士介绍，手机窃听器最初均由国外进口，价格一般在3000元以上。现在广东、福建等地已有生产能力，但高档货仍需进口。"><a href="#据知情人士介绍，手机窃听器最初均由国外进口，价格一般在3000元以上。现在广东、福建等地已有生产能力，但高档货仍需进口。" class="headerlink" title="　　据知情人士介绍，手机窃听器最初均由国外进口，价格一般在3000元以上。现在广东、福建等地已有生产能力，但高档货仍需进口。"></a>　　据知情人士介绍，手机窃听器最初均由国外进口，价格一般在3000元以上。现在广东、福建等地已有生产能力，但高档货仍需进口。</h1><p>手机窃听器隐蔽热销 反窃听还难以实现</p>
<p>第 2 楼:<br>手机窃听器隐蔽热销 反窃听还难以实现</p>
<p>【2004-10-19 11:20】 【记者 甘甜】 【新京报】</p>
<p>　　手机给人们的生活带来了巨大的方便，可在开启了方便之门的同时，潜在的问题也随之而来。</p>
<p>　　被窃听的切肤之痛</p>
<p>　　“我应该怎么办啊?我简直不能活了，我用手机通话的内容别人全都知道，现在我天天活在被人窃听的恐惧中，帮帮我吧。”</p>
<p>　　这是北京一位黎先生当面向记者反映的真实情况。其实不止这一个情况，据我们所知，类似的情况也有非常多起。解决手机的安全隐私问题已经刻不容缓。</p>
<p>　手机窃听器热销</p>
<p>　　一种被称作“手机窃听器”的电话监听设备在市场上已经出现，在泛滥的窃听器材购买网站中查询后，记者按照广告上提供的电话号码与一苏姓女士取得了联系，在了解了记者的购买意图后该女士告诉记者，现在有好几种进口产品，有带在身上的可监听范围达到1000公里以内的需要3600元左右，也有全国范围都能监听的要9600元左右，但购买都必须先交50%的预付款。并且信誓旦旦地保证该产品有效，还包退包换包修。</p>
<p>　　随后，记者来到北京中关村的电子市场中调查，在一家店铺自称需要购买手机窃听器，店主盘问了很久后告诉记者现在货卖缺了加上风声紧，得过段时间才有货。据这位店主称这种手机窃听器价格仅几百元，是在手机里放入一个监听芯片，需要监听的时候，拨一下别人的手机号码，加入预留的密码，对方的手机将在不响铃的情况下自动接通，处于接听状态，而对方却毫无知觉，然后对方周围的一切都可以听得一清二楚。</p>
<p>　　一位深知里面“行情”的朋友告诉记者说，现在这种监听器材在这些电子市场都有销售，现在卖得非常火，但是此类产品都不公开销售，一般都卖给熟人介绍的买主。</p>
<p>　　打好主动防御战</p>
<p>　　专家建议，用户自己要小心，不要把自己手机的识别码等底层信息轻易告诉别人，特别是商务人士、公务人士尤其要注意信息的保密。同时，手机也不要随便放置。只要不把手机和SIM卡轻易交给他人，就能最大限度地保证手机的通讯秘密。不知你注意过没有，有时你的手机明明是关机了但显示屏上确有显示，而不是开机状态。这时你一定要小心了，你的手机很有可能已被窃听了。</p>
<p>　　另外，一些专家也告诉记者，如果在工作中确需使用手机，建议采用CDMA的通信方式，可以在一定程度上防遭窃听。在现实生活中，如果确认自己的手机遭到窃听，在有确切证据的情况下，最好选择向公安机关报案。据他称，目前情况下，民用技术还不能帮助用户实现反窃听。</p>
<p>　　法律的可操作性不强</p>
<p>　　《国家安全法》规定：任何个人或组织不得非法持有、使用窃听、窃照等专用间谍器材。《刑法》规定：非法生产、销售窃听、窃照等专用间谍器材的，处三年以下有期徒刑、拘役或管制。非法使用窃听、窃照等专用间谍器材，造成严重后果的，处二年以下有期徒刑、拘役或管制。</p>
<p>　　对于专业间谍器材的生产和销售，国家法律对此有明令规定的，只能在特殊的主体间进行流通，是不允许民用的。非法使用窃听器材盗窃其他单位或个人商业秘密的，依照《民法通则》、《反不正当竞争法》等法律规定，须赔偿受害人经济损失；非法使用窃听器材侵害他人隐私、名誉权的，依照《民法通则》及最高人民法院有关司法解释，须承担精神损害赔偿责任。</p>
<p>　　手机窃听器窃听原理</p>
<h1 id="手机采用的是一个开放的电子通信系统，只要有相应的接收设备，就能够截获通话信息。在手机通话中，绝大部分信号都是浪费掉了的，而信号的部分流失对手机和基站几乎没有任何影响。手机窃听器就是利用这个原理实现空中信号拦截的。如果不借助反窃听等技术手段，普通用户很难发现自己的手机被窃听。"><a href="#手机采用的是一个开放的电子通信系统，只要有相应的接收设备，就能够截获通话信息。在手机通话中，绝大部分信号都是浪费掉了的，而信号的部分流失对手机和基站几乎没有任何影响。手机窃听器就是利用这个原理实现空中信号拦截的。如果不借助反窃听等技术手段，普通用户很难发现自己的手机被窃听。" class="headerlink" title="　　手机采用的是一个开放的电子通信系统，只要有相应的接收设备，就能够截获通话信息。在手机通话中，绝大部分信号都是浪费掉了的，而信号的部分流失对手机和基站几乎没有任何影响。手机窃听器就是利用这个原理实现空中信号拦截的。如果不借助反窃听等技术手段，普通用户很难发现自己的手机被窃听。"></a>　　手机采用的是一个开放的电子通信系统，只要有相应的接收设备，就能够截获通话信息。在手机通话中，绝大部分信号都是浪费掉了的，而信号的部分流失对手机和基站几乎没有任何影响。手机窃听器就是利用这个原理实现空中信号拦截的。如果不借助反窃听等技术手段，普通用户很难发现自己的手机被窃听。</h1><p>揭秘GSM手机保密性 了解窃听移动通信全过程</p>
<p>【2004-09-29 10:46】 【李芸】 【中<br>华工商时报】</p>
<p>WAP天极IT新闻资讯，业内动态手中掌握<br>WAP天极游戏资讯，精彩内容免费体验</p>
<p>　　人们在享受移动通信带给我们的方便与快捷的同时，或许会或多或少地存在一些通话安全性方面的疑虑：我们的通话内容通过无线电波在空中传播，会不会有人利用非法窃听设备在无线信道上窃听我们的通话内容呢？</p>
<p>　　要解答这个问题，首先需要了解窃听移动通信的过程。窃听电话需要监视无线电信号，找到被窃听电话的电话号码以及与此电话号码相关的身份、鉴权和加密信息，把这些信息复制后，再利用这些信息进行盗用或跟踪、窃听电话。</p>
<p>　　据北京邮电大学信息工程学院林家儒教授介绍，窃听移动电话通常是通过窃听空中无线通信来实现，GSM通信网络的有线通信网络部分大多使用光缆通信来实现，只有手机和移动通信网络的收发信基站之间是采用空中无线通信，窃听有线通信难度更要大得多。</p>
<p>　　GSM移动通信的空中无线通信是由一个个基站的天线形成的许多空中电磁场蜂窝小区所构成的，城市蜂窝小区的直径约在200米至几公里之间，手机只在小区内与基站进行无线连接，一部手机当前正处在哪个小区之中，只有GSM网络内部才会知道。即使网络没有任何加密手段，在一个城市内想要在那么多的蜂窝小区中，找到拟监视的手机的信号，本身就是一件有难度的事。</p>
<p>　　与此同时，为了防止移动通信被窃听，GSM系统还采用了许多非常有效的防范措施。</p>
<p>　　要窃听一个手机，首先必须知道这个手机的号码，但这个号码并不是指普通意义上的139<strong>****</strong>，而是在手机中存储的IM SI或TM SI号码。</p>
<p>　　林教授介绍，在我们使用GSM手机中，实际上存储着多个号码，其中一个是移动电话号码(如：139<strong>****</strong>)，一个是TM SI号，我们在打电话的时候，一般是通过TM SI号来登录移动通信网络。因此，窃听者得不到TM SI号，就无法实现窃听的功能。而且，这个TM SI号还会随着我们手机的通话、位置变动、开关机等而变化，要想知道TM SI对应于哪个手机号是不大可能的。这样就可以有效地防止窃听者根据手机号码来跟踪我们的手机了。</p>
<h1 id="此外，GSM手机的SIM卡最重要的一项功能是进行鉴权和加密。每当我们拨打或接听电话时，交换机都要对用户进行鉴权。SIM卡还可利用加密算法，对话音进行64位的加密，即使用专业机构才有的小型机来破译，也需要几个小时。"><a href="#此外，GSM手机的SIM卡最重要的一项功能是进行鉴权和加密。每当我们拨打或接听电话时，交换机都要对用户进行鉴权。SIM卡还可利用加密算法，对话音进行64位的加密，即使用专业机构才有的小型机来破译，也需要几个小时。" class="headerlink" title="　　此外，GSM手机的SIM卡最重要的一项功能是进行鉴权和加密。每当我们拨打或接听电话时，交换机都要对用户进行鉴权。SIM卡还可利用加密算法，对话音进行64位的加密，即使用专业机构才有的小型机来破译，也需要几个小时。"></a>　　此外，GSM手机的SIM卡最重要的一项功能是进行鉴权和加密。每当我们拨打或接听电话时，交换机都要对用户进行鉴权。SIM卡还可利用加密算法，对话音进行64位的加密，即使用专业机构才有的小型机来破译，也需要几个小时。</h1><p>手机窃听器引发忧虑 有效监控距离100公里？</p>
<p>【2004-10-20 13:52】 【记者 于艺婉】 【天极网】</p>
<p>WAP天极IT新闻资讯，业内动态手中掌握<br>WAP天极游戏资讯，精彩内容免费体验</p>
<p>　　天极网10月20日消息(记者 于艺婉)当手机几乎已经成为人们的生活必需品时，谁也不希望它变成商业机密或是个人隐私的外泄工具，可是，有关手机窃听器方面的消息，还是给消费者带来了隐忧。</p>
<p>　　一家网上商城对这个手机窃听器的描述是：将您所要监听的手机号码拨入就可以拦截信号进行监听，专为拦截非加密型蜂巢式通信的控制与语音而设计，可以随时更换号码，可以待机自动录音，有效距离100公里，而且还特别备注了“也能监听CDMA手机”。</p>
<p>　　如此功能“强大”的手机窃听器被标出了一千余元的价格，而且，商家表示价格还有商量，只不过近期货源紧张，要过一段时间才有货。要想见见它的庐山真面目还挺难，一位王先生也曾与相关商家沟通过，当王先生提出要上门提货时，对方却无论如何都不肯，只是表示只要王先生的汇款一到，他们马上将手机窃听器寄给王先生。</p>
<p>　　对此，一位业内资深的手机设计专家表示：“单从这种手机窃听器的价格看是不太现实的，但是从纯粹的技术角度讲，要想实现对手机的监听是可以实现的，但是难度会非常大。”</p>
<p>　　据该专家介绍，目前一套监测1公里以内手机信号的仪器大概要50多万元，而且，仅仅是捕捉到手机信号而非通话内容，“如果说能够监听到100米以内的手机通话还有点可信。能够监测全国范围内的可能性几乎就没有。所以，消费者不必惊慌。”</p>
<p>　　信息产业部相关监测部门的负责人也与该专家持有相同的观点，虽然他们没有看到过这种手机窃听器，“但是，从价格上判断，可能性不是很大，也许是骗人的。”(完)</p>
<p>=================================================================<br>GSM移动电话必备之保密常识<br>时间: 2004-09-06<br>出处: 新浪科技<br>责任编辑: 酥酥糖</p>
<p>谈到数字移动电话安全保密的性能，它主要基于一张用户识别卡，这张卡相信用户也不会陌生……</p>
<p>　谈到数字移动电话安全保密的性能，它主要基于一张用户识别卡，这张卡相信用户也不会陌生，它就是SIM卡。在GSM系统中，每一个用户都有一张IC卡，它叫用户识别卡。SIM卡中储存有用于用户身份确认所需的信息，并能执行这些与安全保密有关的信息，此外SIM卡还存储有与网络和用户有关的管理功能。</p>
<p>　　SIM卡由五部分组成，它们分别是CPU、程序存储器(ROM)、工作存储器(RAM)、数据存储器(EPROM)和串行通信单元，这些模块都集成在一个芯程序存储器片上。</p>
<p>　　SIM卡在保证系统的安全保密方面有4种功能:</p>
<p>　　1.使用者的身份号(PIN)</p>
<p>　　PIN码是一个4位到8位的个人输入密码，用户只有输入此码，你的手机才能对SIM卡进行数据存取。假如用户连续3次错误输入PIN码，那SIM卡将会被阻塞，碰到这种情况，你必须到电信部门进行重新初始化才能使用，千万不要自己乱动，否则有可能得不偿失。</p>
<p>　　2.使用者的身份号码可移动(IMSI)或者临时移动(TMSI)</p>
<p>　　移动用户身份码可唯一确认移动用户，它只在用户第一次接人进网时通过无线信道传送一次。另外，情况异常时也传送IMSI。用户经常使用的是临时移动用户身份码TMSI。TMSI是不断变化的，并且经过加密后由基站传给用户。能使用，千万不要自己乱动，否则有可能得不偿失。</p>
<p>　　3.如何进行加密</p>
<p>　　为什么系统要对用户数据进行加密呢？因为用户有很多重要事情需要保密，以防止窃听。加密是鉴别权限过程中产生的密钥控制，密钥不在无线信道上传输，而是存于SIM卡和AUC中。加密的密钥产生过程是:通过网络发送一随机数，移动台与网络同时将该随机数用移动台的鉴权密钥进行计算，得到的响应为数据加密的密钥，同时储存起来。</p>
<p>　　4.鉴权过程数据。</p>
<h1 id="鉴权是在网络与SIM卡之间进行的。这个过程是在移动用户登记人网和呼叫时进行的。在用户身份识别后，网络产生一随机的鉴权参数-128bit-，移动台将SIM卡中的密钥作为鉴权算法，对收到参数进行计算，得出鉴权响应参数传回网络，在那里与鉴权中心-AUC-计算出的参数相比较，只有两者相同才是合法用户。由于密钥不能从卡中读出。SIM卡接口传出的是鉴权响应参数，保证了合法用户的权益。"><a href="#鉴权是在网络与SIM卡之间进行的。这个过程是在移动用户登记人网和呼叫时进行的。在用户身份识别后，网络产生一随机的鉴权参数-128bit-，移动台将SIM卡中的密钥作为鉴权算法，对收到参数进行计算，得出鉴权响应参数传回网络，在那里与鉴权中心-AUC-计算出的参数相比较，只有两者相同才是合法用户。由于密钥不能从卡中读出。SIM卡接口传出的是鉴权响应参数，保证了合法用户的权益。" class="headerlink" title="　　鉴权是在网络与SIM卡之间进行的。这个过程是在移动用户登记人网和呼叫时进行的。在用户身份识别后，网络产生一随机的鉴权参数(128bit)，移动台将SIM卡中的密钥作为鉴权算法，对收到参数进行计算，得出鉴权响应参数传回网络，在那里与鉴权中心(AUC)计算出的参数相比较，只有两者相同才是合法用户。由于密钥不能从卡中读出。SIM卡接口传出的是鉴权响应参数，保证了合法用户的权益。"></a>　　鉴权是在网络与SIM卡之间进行的。这个过程是在移动用户登记人网和呼叫时进行的。在用户身份识别后，网络产生一随机的鉴权参数(128bit)，移动台将SIM卡中的密钥作为鉴权算法，对收到参数进行计算，得出鉴权响应参数传回网络，在那里与鉴权中心(AUC)计算出的参数相比较，只有两者相同才是合法用户。由于密钥不能从卡中读出。SIM卡接口传出的是鉴权响应参数，保证了合法用户的权益。</h1></div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2007-11-08-assert-carefully/" class="post-title-link">小心Assert</a></h2><div class="post-info">Nov 8, 2007</div><div class="post-content"><p>今天弄弯管机的破程序的时候，突然发现DEBUG模式和RELEASE模式下面得到的值不同，很是疑惑于这些微妙的差别，以为是RELEASE模式的优化出了问题。但对比DEBUG和RELEASE，即便将几乎所有编译选项都调整为一样，也不能得出一样的结果。</p>
<p>后来进行了跟踪调试，以外的发现assert(oneFunction())这句竟然在RELEASE模式下面不执行。哦，我当时使用这个assert是为了断言一个函数的返回值为正，而这个函数正好要影响我的数据。当然assert在DEBUG模式下面没有问题，正常的编译运行成功。但在RELEASE模式下面一旦调试到这个assert的上一行，在进行单步跟踪的时候就跳到了assert的下一行。也就是说这个函数根本没有运行。原因就出现在这里。把assert去掉以后，函数就正常运行了。</p>
<p>以后用assert要多加小心了，assert函数返回值的时候也一定要把返回值先赋值给一个变量，再assert，就不会出现这样的问题了。</p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2007-11-06-what-you-are-and-others/" class="post-title-link">你也在等人么~</a></h2><div class="post-info">Nov 6, 2007</div><div class="post-content"><p>in the lonely night<br><a href="/images/others/42007116125741.jpg"><img src="/images/others/thumbs/thumbs_42007116125741.jpg" alt="42007116125741.jpg"></a></p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2007-11-02-nighte38091-e38090campus/" class="post-title-link">【夜】校园</a></h2><div class="post-info">Nov 2, 2007</div><div class="post-content"><p>此片系无聊校园到处转悠所拍，诺基亚E50满是噪点、偏色的破摄像头刚好满足拍摄需要，当然，图片只能缩小了看，呵呵~</p>
<p><a href="/images/others/02007111203922.jpg"></a><img src="/images/others/image/thumb/02007111203922.jpg" alt></p>
<p><a href="/images/others/r200711120396.jpg"></a><img src="/images/others/image/thumb/r200711120396.jpg" alt></p>
<p><a href="/images/others/z2007111203844.jpg"></a><img src="/images/others/image/thumb/z2007111203844.jpg" alt></p>
</div></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/post/2007-11-01-think/" class="post-title-link">思考</a></h2><div class="post-info">Nov 1, 2007</div><div class="post-content"><p>我知道迟早我要来弄弯管机的控制和仿真程序的，结果这一天早早的来到了。接手了这个项目的3D显示部分的任务，也着实看到了实验室的强人的代码。</p>
<p>弯管机的控制程序运行在工控机上面，而工控机本质是用PC机作为载体，装的XP作为操作系统。整个控制通过专业的控制卡进行。硬件方面不说，我也不是做硬件的，就从软件的角度看看代码就让我彻底晕死了。</p>
<p>整个项目用的是VC6进行设计开发，数据库用SQL SERVER 2000。麻烦的就在这个VC6上面，彻底的古老的玩意儿了，不完全支持STL，有些莫名奇妙的vector的BUG就出现在里面。就我来看整个界面是比较简单的，没有太多动态的部分，但是整个工程的代码让我看了就彻底郁闷了——几乎所有的窗体、按钮都是慢慢用MFC凑出来的，也就是说，界面纯粹用代码写出来的。结果，这个界面变得奇丑无比，想改一下相关的东西都很麻烦，想想全是API在那儿弄过去弄过来，一会儿一个SendMessage，烦不烦！我拿到这个代码以后想添加一个东西完全无从下手，在未编译运行之前根本不知道这个窗体是什么样子的，好歹那些纯静态的窗体你给我用画出来嘛。结果由于是他们要做多国语言，不得不硬编码。至于运行起来有动态的地方(其实也就是一些类似tabControl的东东)更是摸不着头脑，只有大概猜一下，然后设置一个断点，再运行一下，看看是不是那个地方，感觉比盲人摸象还牛，毕竟盲人知道那个是象，有四条腿，总不会摸出第五条腿嘛！</p>
<p>界面的超级抽象不说了，另一方面更强的问题在于怎么去修改这个界面。每次做个修改都要实际运行一下看看结果，不对再改，天啊，这太折磨人了。</p>
<p>去年刚刚接触这个项目的时候，我就对当时写了一半的代码提出质疑，为什么现在开发项目还在用VC6，为什么不用.NET平台？.NET已经是很先进的一个平台了，虽然直接操作API上面有一些屏障。大家一致回答，不懂.NET，也不知道怎么用.NET来控制工控卡，还是用熟悉的VC6来做吧。其实我后悔当初为什么加进来，还不如另给我一个题目，让我从0开始！</p>
<p>再来看看我周围的研究生，他们来的时候都或多或少学了一些C/C++，老一届的师兄因为历史的原因都说用VC6吧，所以天天抱着一本厚厚的MFC读啊读，做项目也只有用这个了，因为学了C/C++，他们认为用VC6这个投资才没有浪费。没有人告诉他们，还有C#可以满足你的要求，学学C++/CLI，生活便会开心许多。但我想，对于大多数“懒”人来说，我的这句话依然只是一句废话。</p>
<p>其实在我接触C++/CLI之前我也有一些疑问，.NET如何去控制工控卡。VS2003时代有Managed C++ Extenstion，但其怪异的语法让人望而却步。幸亏微软没有忘记这个强力雾气，在VS2005时推出了C++/CLI。这个革命性的语言让托管和非托管语言隔阂缩小了很多。可以说目前.NET平台上，C++/CLI是最为强大的语言，他将历史和未来进行了完美的结合，让以前旧有的代码得以充分利用，也让现有的工作可以基于.NET平台，从而享受.NET带来的优势和愉悦。目前，我利用C++/CLI，已经实现把纯C++的OpenSceneGraph图形库和C#结合起来一起工作，C#专门做界面，OpenSceneGraph负责OpenGL图形显示，各司其职，将做复杂界面的挑战减小到了最小，而又不失灵活。</p>
<p>那么工控机运行.NET程序是否那么快？据我了解现在所配置的工控机的CPU配置都达到了P4的水平，内存也多在512以上，除了第一次运行可能比较慢以外，这个配置运行.NET程序不存在任何问题。但对于开发机来说，VS2005先进的功能让很多旧电脑不堪重负，强人们的机器实在是太老了，512内存跑VS2005那是很痛苦的。为什么老板就不能升级一下我们的电脑呢？呵呵，为什么“不”这就不容多说了吧。我怕哪天学生科的老师又叫一个学生敲敲寝室的门，然后对我说，XX老师叫你好好学习。</p>
<p>废话不多说，以我的观点来看，如此简单的工控机的界面用不着动用VC6这个老元老了，除非是需要继续进行2000年左右项目的开发，而迁移成本很高的情况下。2005年以后的工程都可以用VS2005来开发了，在嫦娥都能奔月的今天，开发工具不在进行革新，就好比原始人用石头和现代人的原子弹比拼。要知道我做PDA上面的地震数据采集的界面都比这个复杂太多，工控机优越的硬件环境足以支撑.NET平台。</p>
<p>用C++来构造界面往往需要花费很大的精力才能调整好整个，有过MFC开发经验的人就知道这些痛苦了。要实现一个多国语言都显得很麻烦。其次，C++的内存管理始终是一个问题，即便很小心，也可能忘记new了一个数组以后(int* p=new int[count])需要用delete[] p进行删除。编译器不会给你说这个地方需要怎么做，最多给你一个Warning，但恐怕业余程序员也不屑于来更正这些Warning。错误的操作导致的内存泄露很麻烦，也不容易查找出来，而.NET的托管平台就没有这个隐患，除非你自己使用了非托管资源而未作处理。</p>
<p>.NET的优势不仅在于以上所说的创建界面方面，整个.NET平台简化了太多的操作。XML结合序列化反序列化的使用使得存储一个结构变得轻而易举，XML以明文存储的结构数据更能很容易的进行查看，找到问题所在。而在现在的项目中，由于VC6的局限，最方便的方法莫过于直接将一个结构写二进制文件。但这样造成了严重的后果，如果以后版本升级，之前的数据文件将不再兼容，虽然有些即便看上去可以用，但值却不是一一对应，可能隐藏一些很复杂的问题。想想为什么现在Office 2007都要用XML来存储，我想，这肯定是经过了太多的兼容性的折磨的。其次微软的跨平台的野心也促使其使用工业标准。正是由于这些原因，这才带来了OpenOffice和Microsoft Office的高度兼容。</p>
<p>再说说数据库里面存放的玩意儿。对数据库我不是太在行，对于表结构那些我没有太多的看法。当然我知道用C++调用ADO访问SQL Server在现在.NET平台下看来简直是没事找事做。强人们用了好几百行代码来写这个数据库部分，有必要么？现在系统数据库里面存储的工艺文件和管形文件是用二进制来存储的，如果要调试，就要用专门的类来进行读取，才知道里面到底有什么。我知道，C++里面操作XML不是一个简单的事情，C++缺少META信息也给序列化带来了不便。这不怪强人们，如果他们出生在我的年代，用上了.NET平台，用上了序列化和反序列化，我想他们肯定很乐意几行代码将需要的结构保存下来，而不是费尽心思去写Load和Save的代码。</p>
<p>回过头来，当身处强人们的位置时，当机器无法快速运行VS2005时，当老板的项目逼得很急时，没有更强的专业开发人员时，作为业余的程序员，也只有选择走一些弯路。越调越多的BUG，越变越复杂的需求，无不深深的折磨着他们身心。而现在项目就要移交给我，我真想将整个项目重新规划，用.NET重写整个逻辑，用C++/CLI来操作工控卡，但，老板愿意承担其中的风险么？他愿意花时间么？一年多积累下来的代码重新以后是不是改动太大了？如果再不做一些改动，恐怕这些代码以后的路很难走。</p>
<p>当然，项目组一起做上来的业余程序员也只能走一步算一步，越走越黑暗，越走越伤心，最终毕业了就真正解脱了——为什么程序开发这么难</p>
</div></article></div></div></div><div id="sidebar" class="left"><div id="about-panel"><div class="info"><div class="title">贺思聪</div><div class="bio">《爬虫实战：从数据到产品》作者，国内首个机票价格历史及预测小程序“爱飞狗旅行”作者，极客、架构师、大数据玩家。</div></div><img src="/images/avatar.png" class="avatar"></div><div id="friend-links-panel"><div class="panel-title"><p>LINKS</p></div><a href="http://github.com/derekhe" target="_blank" class="link-item"><div class="link-container"><div class="site-name">GitHub</div><div class="site-desc">http://github.com/derekhe</div></div></a><a href="http://www.jianshu.com/u/b1e713e56ea6" target="_blank" class="link-item"><div class="link-container"><div class="site-name">简书</div><div class="site-desc">http://www.jianshu.com/u/b1e713e56ea6</div></div></a><a href="https://www.linkedin.com/in/sicong-he-56a95437/" target="_blank" class="link-item"><div class="link-container"><div class="site-name">LinkedIn</div><div class="site-desc">https://www.linkedin.com/in/sicong-he-56a95437/</div></div></a></div></div></div><div class="clear"></div></main><footer class="footer-container"><div class="paginator"><a href="/page/80/" class="prev">PREV</a><a href="/page/82/" class="next">NEXT</a></div><div class="copyright"><p>© 2008 - 2020 <a href="http://www.april1985.com">贺思聪</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer><script>var _mtac = {}; (function() {     var mta = document.createElement("script"); mta.src = "http://pingjs.qq.com/h5/stats.js?v2.0.2";    mta.setAttribute("name", "MTAH5");    mta.setAttribute("sid", "500490740");    var s = document.getElementsByTagName("script")[0];    s.parentNode.insertBefore(mta, s);})();</script></body></html>